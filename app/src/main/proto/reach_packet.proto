syntax = "proto3";

option java_package = "com.reach.project.core.serialization";
option java_multiple_files = true;

message ReachPacket {
    string service_name = 1;
    string sender_id = 2;
    oneof payload {
        TextMessage text_message = 3;
        TypingIndicator typing_indicator = 4;
        Hello hello = 5;
        Heartbeat heartbeat = 6;
        Goodbye goodbye = 7;
        FileHeader file_header = 8;
        FileAccept file_accept = 9;
    }
}

message TextMessage {
    string sender_username = 1;
    string message_id = 2;
    string message_text = 3;
    int64 timestamp = 4;
}

message TypingIndicator { }

message Hello {
    string sender_username = 1;
}

message Heartbeat {
    string sender_username = 1;
}

message Goodbye { }

message FileHeader {
    string file_id = 1;
    string filename = 2;
    int64 file_size = 3;
    string mime_type = 4;
}

message FileAccept {
    string file_id = 1;
    int32 port = 2;
}